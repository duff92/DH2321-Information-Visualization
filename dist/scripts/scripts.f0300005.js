"use strict";angular.module("dh2321InformationVisualizationApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","nvd3"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("dh2321InformationVisualizationApp").controller("MainCtrl",["$scope",function(a){a.options={chart:{type:"parallelCoordinates",height:450,margin:{top:30,right:20,bottom:10,left:20},color:d3.scale.category10().range(),dimensionNames:["Feeling of happiness","State of health (subjective)","Satisfaction with your life","Science and technology (health)","Total health spending (% of GDP)","Total health spending per person ($)"],dispatch:{stateChange:function(a){console.log("stateChange")},brushstart:function(a){console.log("brush start")},brush:function(a){console.log("brush")},brushEnd:function(a){console.log("brush end")}}}},a.initData=[{name:"Chile",color:"#1f77b4","Feeling of happiness":"3.08","State of health (subjective)":"2.88","Satisfaction with your life":"7.27","Science and technology (health)":"7.01","Total health spending (% of GDP)":"8.0","Total health spending per person ($)":"947.22"},{name:"China",color:"#ff7f0e","Feeling of happiness":"3.00","State of health (subjective)":"2.87","Satisfaction with your life":"6.85","Science and technology (health)":"8.33","Total health spending (% of GDP)":"5.1","Total health spending per person ($)":"220.88"},{name:"South Korea",color:"#2ca02c","Feeling of happiness":"3.05","State of health (subjective)":"2.95","Satisfaction with your life":"6.51","Science and technology (health)":"7.42","Total health spending (% of GDP)":"6.9","Total health spending per person ($)":"1438.78"},{name:"Rwanda",color:"#9467bd","Feeling of happiness":"3.3","State of health (subjective)":"3.13","Satisfaction with your life":"6.47","Science and technology (health)":"8.72","Total health spending (% of GDP)":"10.5","Total health spending per person ($)":"55.51"},{name:"Sweden",color:"#8c564b","Feeling of happiness":"3.35","State of health (subjective)":"3.03","Satisfaction with your life":"7.55","Science and technology (health)":"7.54","Total health spending (% of GDP)":"9.63","Total health spending per person ($)":"4710.43"},{name:"United States",color:"#e377c2","Feeling of happiness":"3.25","State of health (subjective)":"3.05","Satisfaction with your life":"7.37","Science and technology (health)":"7.19","Total health spending (% of GDP)":"17.89","Total health spending per person ($)":"8361.73"}],a.data=angular.copy(a.initData),a.checkboxes={},a.onchange=function(){a.data=[],angular.forEach(a.initData,function(b){a.checkboxes[b.name]&&a.data.push(b)})}}]),angular.module("dh2321InformationVisualizationApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("d3",[]).factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="bower_components/d3/d3.js",f.onreadystatechange=function(){"complete"===this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]),angular.module("dh2321InformationVisualizationApp").directive("simpleLineChart",["d3Service",function(a){return{restrict:"EA",scope:{},link:function(b,c){a.d3().then(function(a){var d={top:20,right:20,bottom:30,left:50},e=600-d.left-d.right,f=700-d.top-d.bottom,g=a.time.format("%d-%b-%y").parse,h=a.time.scale().range([0,e]),i=a.scale.linear().range([f,0]),j=a.svg.axis().scale(h).orient("bottom"),k=a.svg.axis().scale(i).orient("left"),l=a.svg.line().x(function(a){return h(a.date)}).y(function(a){return i(a.close)}),m=a.select(c[0]).append("svg").attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")");b.data=[{date:"4-Apr-12",close:34},{date:"5-Apr-12",close:45},{date:"6-Apr-12",close:37},{date:"7-Apr-12",close:56},{date:"8-Apr-12",close:50},{date:"9-Apr-12",close:77}],b.data.forEach(function(a){a.date=g(a.date),a.close=+a.close}),h.domain(a.extent(b.data,function(a){return a.date})),i.domain(a.extent(b.data,function(a){return a.close})),m.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(j),m.append("g").attr("class","y axis").call(k).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Price ($)"),m.append("path").datum(b.data).attr("class","line").attr("d",l)})}}}]),angular.module("dh2321InformationVisualizationApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="container-fluid"> <div class="jumbotron"> This is a project in the course Information Visualization (DH2321) at KTH. The graph below illustrates a comparision between some countries regarding how subjective gradings of health and happiness (collected from <a href="http://www.worldvaluessurvey.org/WVSOnline.jsp">World Values Survey</a>) could be compared with data of spending on health products in each country (collected from <a href="http://www.gapminder.org/data/">Gapminder</a>). </div> <div class="row"> <div class="col-sm-4"> <span ng-repeat="series in initData"> <b ng-style="{color: series.color}">{{series.name}}</b> <input type="checkbox" ng-model="checkboxes[series.name]" ng-init="checkboxes[series.name]=true" ng-change="onchange()"> </span> </div> <div class="col-sm-4 col-sm-offset-4"> <button class="btn btn-default" ng-click="api.refresh()">Reset brushes</button> </div> </div> <div class="row"> <nvd3 options="options" data="data" api="api"></nvd3> </div></div>')}]);